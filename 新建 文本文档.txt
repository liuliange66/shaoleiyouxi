好的，以下是**极其详细、面向原生APP开发的“卡通风格扫雷游戏”需求说明文档**，每一项都参考了你后续要求的描述粒度和交互细节，尤其是动画、提示、交互等部分，力求精确还原HTML版的体验和细节。

---

# 卡通风格扫雷游戏 原生APP需求说明文档

## 1. 产品定位与目标

- 打造一款卡通可爱风格、动画丰富、交互友好、适配移动端的原生扫雷游戏APP。
- 目标用户为休闲玩家、扫雷爱好者、青少年及儿童。
- 体验需对标并超越当前HTML5版本，后续可扩展更多玩法和个性化内容。

---

## 2. 主要功能模块与交互细节

### 2.1 游戏主界面

- **顶部状态栏**
  - 设置按钮（齿轮图标），点击弹出设置弹窗。
  - 帮助按钮（问号图标），点击弹出玩法说明。
  - 计时器，显示本局已用秒数。
  - 当前关卡名（如“初级/中级/高级”）。
  - 生命值显示❤️/💔，最多3颗，动态变化）。
  - 剩余地雷数（带地雷图标，随插旗/揭雷动态变化）。

- **扫雷棋盘**
  - 动态生成，支持不同难度（如9x9/16x16/24x20）。
  - 每个格子有三种状态：未揭开、已揭开、插旗。
  - 格子内容：数字、地雷、空白。
  - 支持插旗、挖开、双击数字自动展开等操作。
  - 移动端支持长按插旗、模式切换按钮等防误触设计。
  - 棋盘自适应屏幕，支持滑动查看大棋盘。

- **底部操作区**
  - 挖开/插旗模式切换按钮，图标随模式变化。
  - 提示按钮（💡），有次数限制，显示剩余次数。
  - 重新开始按钮（🔄），重置当前关卡。
  - 其它功能按钮（如放弃挑战、排行榜等，预留）。

- **弹窗与提示**
  - 设置弹窗：音效、震动、提示次数、难度选择、放弃挑战、用户ID等。
  - 帮助弹窗：详细玩法说明。
  - 状态提示条：如“胜利”、“失败”、“提示已用完”等，自动消失或操作时隐藏。
  - “再来一局”按钮，胜利/失败后弹出。

---

### 2.2 游戏核心逻辑

- **棋盘生成与重置**
  - 根据难度动态生成棋盘和地雷分布。
  - 首次点击保证安全（首点不生成地雷）。
  - 自动展开空白区域，递归揭开。
  - 统计剩余地雷数、已揭开格子数。

- **插旗与挖开**
  - 插旗/取消插旗，更新剩余地雷数。
  - 挖开地雷时扣除生命值，生命值为0时游戏失败。
  - 挖开数字格时高亮邻居，双击数字可自动展开。
  - 插旗/挖开均有动画和音效反馈。

- **胜利/失败判定**
  - 所有非雷格子被揭开即胜利。
  - 生命值耗尽或踩雷即失败。
  - 游戏结束后自动展示所有地雷和错误标记。

- **提示功能**
  - 有次数限制（如1/3/无限），可在设置中选择。
  - 优先高亮安全区或地雷区。
  - 动画高亮中心数字格及邻居，地雷格有特殊半透明闪烁提示。

---

### 2.3 动画与特效（详细交互说明）

#### 2.3.1 插旗动画

- 当玩家在格子上插旗时：
  - 旗帜图标自上方“掉落”到格子中心，带有旋转和弹跳效果。
  - 插旗成功后，旗帜会有一次“摇晃”动画。
  - 同时伴随彩色粒子和光圈扩散动画，粒子从格子中心向四周喷射。
  - 还会有“彩带烟花”效果：多条彩色带状丝带从格子中心喷射，带旋转和渐隐动画，持续约0.85秒。
  - 插旗动画结束后，旗帜保持在格子上。

#### 2.3.2 爆炸动画

- 当玩家踩到地雷时：
  - 地雷格会有“弹出”爆炸动画，格子背景变红，伴随缩放和抖动。
  - 地雷格内容切换为Q萌表情（大X眼、波浪嘴、大红舌头、爆炸星星等）。
  - 爆炸中心会有碎片和冲击波动画，碎片以彩色方块形式四散飞出，冲击波以圆形扩散。
  - 爆炸后，地雷格变为“已揭开地雷”状态，显示特殊SVG地雷图案。
  - 邻居格会有轻微抖动动画，提示爆炸影响范围。

#### 2.3.3 提示动画

- 当用户点击“提示”按钮时，系统会自动选择一个合适的数字格（优先选择未被揭开的、周围有未揭开的格子的数字格），并以动画方式高亮该数字格及其周围的8个邻居格。
- 高亮方式为：
  - **中心数字格**会有明显的高亮边框或背景色闪烁动画（如黄色/橙色发光），动画持续约2.1秒。
  - **其周围的8个邻居格**会同步出现高亮边框或背景色闪烁，但颜色和动画效果略弱于中心格。
  - **如果是“地雷区提示”**（即邻居中有未揭开的地雷格）：
    - 未揭开的地雷格会以“砖块半透明闪烁”方式高亮（opacity: 0.5），并在其上方短暂显示“💣”表情，伴随闪烁动画，动画持续约2.1秒，结束后自动恢复原状。
    - 其它邻居格（非地雷）以普通高亮边框显示。
  - 动画期间所有高亮效果保持，动画结束后自动恢复原状。
- 若无可用提示目标，则弹出“提示已用完”或“无可提示位置”状态提示。

#### 2.3.4 其它动画

- 揭开格子时有“弹出”或“掉落”动画，数字/空白格弹出，模拟方块弹跳。
- 生命值减少时，❤️图标有缩放和颜色变化动画，并在顶部弹出“-1❤️”提示。
- 胜利时弹出横幅，棋盘上方飘落彩带，所有旗帜依次闪烁。
- 失败时弹出“失败”提示，所有地雷依次揭示。

---

### 2.4 音效与震动

- 挖开、插旗、爆炸、胜利、点击等均有独立音效。
- 插旗、爆炸、胜利等场景有短暂震动反馈。
- 音效和震动可在设置中分别开关。

---

### 2.5 设置与个性化

- 音效、震动开关。
- 提示次数选择（1/3/无限）。
- 难度选择（初级/中级/高级）。
- 放弃挑战按钮。
- 用户ID显示与复制。
- 协议/隐私政策入口。

---

### 2.6 无障碍与适配

- 所有交互元素加label/描述，支持读屏。
- 适配不同屏幕尺寸与方向，支持深色模式。
- 触摸、滑动、长按等移动端交互优化。
- 高对比度、色盲友好模式（可扩展）。

---

## 3. 技术实现建议

- 推荐技术栈：iOS（Swift/SwiftUI）、Android（Kotlin/Jetpack Compose）、跨平台（Flutter/Dart）。
- 动画建议用原生动画框架实现，粒子、彩带、爆炸等用自定义View/Canvas绘制。
- 棋盘用二维数组管理，格子对象包含：是否地雷、是否揭开、是否插旗、邻雷数、动画状态等。
- 状态管理用响应式/声明式UI框架，便于状态驱动界面刷新。
- 预留多语言、本地化支持。

---

## 4. 交互与体验细节

- 所有按钮有点击反馈，动画流畅，时长适中。
- 插旗/挖开操作防误触，移动端可长按插旗或模式切换。
- 状态提示自动消失或在操作时隐藏。
- 支持滑轮/拖动选择难度和提示次数。
- 调试窗口仅开发/测试可见。

---

## 5. 可扩展性与后续方向

- 更多主题皮肤、表情、音效包。
- 排行榜、成就系统。
- 每日挑战、关卡编辑器。
- 云存档、账号系统。
- 社交分享、好友对战。

---

如需针对某一功能点详细拆解、原生实现建议或迁移代码示例，请随时告知！  
你可以直接让 Cursor 按照本说明文档，逐步拆解并实现每一个模块。


### 2.5 设置与个性化（详细补充）

#### 2.5.1 设置按钮弹窗内容

点击主界面右上角“设置”按钮（齿轮图标），弹出设置弹窗，内容包括：

1. **音效开关**  
   - 切换按钮（Toggle Switch），控制游戏内所有音效（如挖开、插旗、爆炸、胜利等）。
   - 状态实时生效，关闭后所有音效静音。

2. **震动开关**  
   - 切换按钮，控制游戏内震动反馈（如插旗、爆炸、胜利等）。
   - 关闭后所有震动反馈失效。

3. **提示次数选择**  
   - 采用滑轮选择器（Picker）或单选按钮，选项为：1次、3次、无限次。
   - 选择后本局生效，影响“提示”按钮可用次数。

4. **难度选择**  
   - 采用滑轮选择器或单选按钮，选项为：初级（9x9/10雷）、中级（16x16/40雷）、高级（24x20/99雷）。
   - 选择后自动重开新局，棋盘和地雷数随之变化。

5. **放弃挑战按钮**  
   - 明显的红色按钮，点击后弹出二次确认弹窗：“确定要放弃本局挑战吗？”
   - 确认后本局直接判负，显示失败动画和提示。

6. **用户ID显示与复制**  
   - 显示当前用户唯一ID（如UUID或昵称），旁边有“复制”按钮。
   - 便于用户反馈、客服、排行榜等场景使用。

7. **协议与隐私政策入口**  
   - “用户协议”、“隐私政策”两个文本按钮，点击后跳转到对应页面或弹窗。

8. **联系客服/问题反馈**（可选/预留）  
   - 显示“联系客服”或“问题反馈”按钮，点击后可跳转到反馈表单或第三方客服入口。

9. **关于本游戏**  
   - 显示游戏版本号、开发者信息、致谢等。

#### 2.5.2 交互与体验细节

- 弹窗采用卡通风格圆角设计，背景半透明模糊，内容区有阴影和动画弹出效果。
- 所有切换按钮、选择器均有动画反馈，选中状态高亮。
- 关闭弹窗可点击右上角“X”或弹窗外区域。
- 设置项切换/选择后立即生效，无需额外保存按钮。
- 重要操作（如放弃挑战）需二次确认，防止误触。
- 支持无障碍（每项有label/描述，切换器可用系统辅助功能操作）。

---

如需每一项的UI草图、原生控件建议或代码结构示例，也可随时告知！
